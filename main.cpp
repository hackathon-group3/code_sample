#include <Eigen/Core>
#include "icp.hpp"

int main(int argc, char argv[])
{
	Eigen::MatrixXd source(30, 3), target(30, 3);

	source <<
		-3.000000, 0.000740, 1,
		-2.800000, 0.002205, 1,
		-2.600000, 0.006028, 1,
		-2.400000, 0.015125, 1,
		-2.200000, 0.034791, 1,
		-2.000000, 0.073263, 1,
		-1.800000, 0.140990, 1,
		-1.600000, 0.247375, 1,
		-1.400000, 0.394404, 1,
		-1.200000, 0.568627, 1,
		-1.000000, 0.735759, 1,
		-0.800000, 0.843668, 1,
		-0.600000, 0.837212, 1,
		-0.400000, 0.681715, 1,
		-0.200000, 0.384316, 1,
		0.000000, -0.000000, 1,
		0.200000, -0.384316, 1,
		0.400000, -0.681715, 1,
		0.600000, -0.837212, 1,
		0.800000, -0.843668, 1,
		1.000000, -0.735759, 1,
		1.200000, -0.568627, 1,
		1.400000, -0.394404, 1,
		1.600000, -0.247375, 1,
		1.800000, -0.140990, 1,
		2.000000, -0.073263, 1,
		2.200000, -0.034791, 1,
		2.400000, -0.015125, 1,
		2.600000, -0.006028, 1,
		2.800000, -0.002205, 1;

	target <<
		-2.973510, 0.397789, 1,
		-2.775076, 0.372771, 1,
		-2.576329, 0.350090, 1,
		-2.376885, 0.332636, 1,
		-2.176042, 0.325659, 1,
		-1.972709, 0.337322, 1,
		-1.765505, 0.377983, 1,
		-1.553184, 0.456962, 1,
		-1.335484, 0.576227, 1,
		-1.114185, 0.722447, 1,
		-0.893824, 0.861638, 1,
		-0.681301, 0.942127, 1,
		-0.483915, 0.909258, 1,
		-0.306255, 0.728659, 1,
		-0.147376, 0.407405, 1,
		0.000000, 0.000000, 1,
		0.147376, -0.407405, 1,
		0.306255, -0.728659, 1,
		0.483915, -0.909258, 1,
		0.681301, -0.942127, 1,
		0.893824, -0.861638, 1,
		1.114185, -0.722447, 1,
		1.335484, -0.576227, 1,
		1.553184, -0.456962, 1,
		1.765505, -0.377983, 1,
		1.972709, -0.337322, 1,
		2.176042, -0.325659, 1,
		2.376885, -0.332636, 1,
		2.576329, -0.350090, 1,
		2.775076, -0.372771, 1;

	ICP<ClosestPointLiner<double>, SolveTransformSVD<double>, double> icptest;

	icptest.setInputSource(source);
	icptest.setInputTarget(target);

	icptest.align();

	return 0;
}
